---
title: "签名与证书"
date: 2025-01-06T23:03:37+08:00
categories: ["Signing"]
author: "Qingfeng Zhang"
---

# 加密算法

加密算法可以分为对称加密和非对称加密算法两种：
- 对称加密算法：公钥与私钥相同，优点是加密计算速度快、效率高，缺点是密钥分发困难，很难保证密钥的安全性，适用于数据存储加密和网络通信加密，常见的算法有AES
- 非对称加密算法：在加密解密过程中使用公钥与私钥，优点是安全性高，公钥可以公开，缺点是计算效率低，适用于数字签名和密钥交换，常见的算法有RSA

基于两种算法的特点，就有混合加密算法，使用非对称加密算法传输对称加密的密钥保证安全性，然后再使用对称加密算法来提高加密的效率

非对称加密算法中的公钥与私钥的区别只在于私钥需要保证不被泄漏，除此之外，私钥可以用来加密也可以用来解密

一般在数据加密的场景中，会使用公钥进行加密，私钥解密以保证信息不会被泄漏，而在数字签名时，使用私钥进行加密，公钥进行解密，其目的是保证签名的来源是真实可靠的，因为要保证私钥不被泄漏，所以除了签名者之外，没人可以使用其私钥来伪造签名，并且签名信息是否泄漏并不重要

# 数字签名

数字签名是用于验证数据来源可靠性，以及数据完整性的一种加密技术，是基于非对称加密算法实现的

在对文件进行数字签名的时候一般会：
- 计算文件的哈希值，如使用SHA-256算法
- 使用非对称加密的私钥对文件的哈希值进行加密
- 将加密结果附在原文件中

后续的解密过程为：
- 根据非对称加密算法的公钥进行解密得到哈希值
- 使用相同的哈希算法计算原文件的哈希值
- 验证两个哈希值是否相同

# 数字证书

在数字签名的过程中只需要哈希算法、私钥和公钥，并不涉及证书，那么为什么需要证书？

- 任何人都可以自己生成非对称加密算法的公钥和私钥，没法保证签名者的身份可靠
- 公钥一般会随着签名文件一起发送，但是也有需要单独获取的，在文件传输的过程中，信息可能被篡改导致解密验证失败

因此数字证书的作用就是

- 验证文件的真实来源，证书是由权威机构（CA）签发的，其中包含签名者的身份信息
- 保证文件的完整性，保证解密验证使用的公钥完整没有被篡改
- 建立信任关系，用户可以信任CA，从而间接信任签名者

数字证书中包含公钥和签名者的信息，其作用就是保证公钥是可靠的，其本质也是CA使用私钥再对证书的内容进行签名，证书内容包括：

- 公钥
- 公钥所有者信息
- 证书有效期
- 证书颁发机构信息

为了保证用户证书的可靠性，CA一般会使用证书链，证书链中的中间证书用于验证用户证书，而根证书用于验证中间证书，并且根证书一般会在用户的系统环境中